@page "/Account/Manage/PersonalData"

@inject IdentityUserAccessor UserAccessor

<PageTitle>Personal Data</PageTitle>

<MudText Typo="Typo.h6" GutterBottom>Personal data</MudText>

<StatusMessage />

<MudGrid>
    <MudItem md="12">
        <MudText Typo="Typo.body1">
            Your account contains personal data that you have given us. This page allows you to download or delete that data.
        </MudText>
    </MudItem>
    <MudItem md="12">
        <MudStack Row>
            <PostForm Class="w-100" Action="Account/Manage/DownloadPersonalData">
                <MudStaticButton Variant="Variant.Filled" Color="Color.Primary" FullWidth FormAction="FormAction.Submit">Download</MudStaticButton>
            </PostForm>
            <MudButton Variant="Variant.Filled" Color="Color.Error" FullWidth Href="Account/Manage/DeletePersonalData">Delete</MudButton>
        </MudStack>
    </MudItem>
</MudGrid>

@code {
    [CascadingParameter]
    private HttpContext HttpContext { get; set; } = default!;

    protected override Task OnInitializedAsync() => UserAccessor.GetRequiredUserAsync(HttpContext);
}
